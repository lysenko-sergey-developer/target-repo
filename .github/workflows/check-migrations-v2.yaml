jobs:
  check-migrations:
    permissions: write-all
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Get target branch name
      uses: technote-space/get-diff-action@v6

      with:
        PATTERNS: |
          +(migrations)/*.sql
        SEPARATOR: ", "

  second-step:
    needs: check-migrations
    steps:
      - name: Test
        if: ${{env.GIT_DIFF_FILTERED}} != ''
        echo: "Added migration!"
